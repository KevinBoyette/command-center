#!/usr/bin/env sh

set -e
base_branch=${1:-master}

for file in $(git diff HEAD..$base_branch --stat |  awk '/(\.rb|Rakefile|Gemfile)/ { print $1  }'  | egrep -v "schema.rb|Gemfile.lock" ) ; do
  test -e $file && rubocop -a $file
done
